{% extends "layout.html" %}
{% block title %}Index{% endblock %}
{% block head %}
  {{ super() }}
  <style type="text/css">
    .important { color: #336699; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
{% endblock %}
{% block content %}
  <h1>register</h1>
  <!-- CRUD -Create -->
  Welcome to my site
  <form action="/" method="post">
      <label for="data">Enter Password:</label><br>
      <input type="text"  name="pwd" id="pwd"><br>
      <label for="data">Enter user:</label><br>
      <input type="text"  name="user" id="user"><br>
      <input type="submit" value="Submit">
  </form>

<!--CRUD -Read display all users -->
<table>
    <thead>
        <tr>
            <th>Index</th>
            <th>ID</th>
            <th>Name</th>
        </tr>
    </thead>
    <tbody>
        
        {% for  item in data %}
        <tr>
            <td><button onclick="delUser('{{item[0] }}')"> {{ item[0] }} - delete</button></td>
            <td><button onclick="updUser('{{item[0] }}')"> {{ item[0] }} - upd</button></td>
            <td>{{ item[1] }}</td>
            <td>{{ item[2] }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    const delUser=(id)=>{
        console.log(`/del/${id}`);
        axios.delete(`/del/${id}`).then(res => console.log(res.data))
    }

    const updUser=(id)=>{
        console.log("updateeeeeeeeee");
        console.log(`/upd/${id}`);
        axios.put(`/upd/${id}`,{user:user.value,pwd:pwd.value}).then(res => console.log(res.data))
    }
</script>

<p class="important">
    Welcome to my awesome homepage.
{% endblock %}
